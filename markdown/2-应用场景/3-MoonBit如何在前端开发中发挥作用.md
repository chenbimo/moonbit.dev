å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ `å‰ç«¯ä¹‹è™é™ˆéšæ˜“`ï¼Œä¹Ÿæ˜¯ `MoonBit` å®˜æ–¹è®¤è¯çš„ `å¸ƒé“å¸ˆ`ï¼Œæ¬¢è¿å¤§å®¶ä¸æˆ‘äº¤æœ‹å‹ï¼Œæˆ‘æ‰€æœ‰æ–‡ç« å‡ä¸ºå¤æ³•æ‰‹å†™æ—  AIã€‚

- æˆ‘çš„ä¸ªäººç½‘ç«™ `https://chensuiyi.me`
- MoonBit å¼€å‘ç½‘ï¼š`https://moonbit.dev`

---

> è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯å•çº¯çš„æŠ€æœ¯æ•™ç¨‹ï¼Œè€Œæ˜¯ä¸å„ä½äº¤æœ‹å‹ï¼Œåˆ†äº«ä»£ç è¡Œé—´çš„æ•…äº‹ï¼Œå¿ƒå¾—ï¼Œç»éªŒä¸æŠ€æœ¯ï¼Œä¸å–œè¯·ç§»æ­¥ã€‚

---

å‰å‡ å¤©æˆ‘å‘äº† 2 ç¯‡ MoonBit æ–‡ç« ï¼Œåˆ†åˆ«æ˜¯[ç¨‹åºå‘˜çš„æ–°ç©å…·ï¼ŒMoonBit (æœˆå…”) ç¼–ç¨‹è¯­è¨€ç§‘æ™®](https://mp.weixin.qq.com/s/r6vMnoTkipzwdW6snSlLww)å’Œ [MoonBit åŠ©åŠ›å‰ç«¯å¼€å‘ï¼ŒåŠ å¯†&æ€§èƒ½ä¸¤ä¸è¯¯ï¼Œæ–æ³¢é‚£å¥‘æµ‹è¯•æé«˜ 3-4 å€](https://mp.weixin.qq.com/s/V-c_lGjtJ1tW1RoB8icn0w)ï¼Œæœ‰å°ä¼™ä¼´çœ‹äº†ä¹‹åï¼Œè¿˜æ˜¯ä¸çŸ¥é“ MoonBit å¦‚ä½•ç”¨äºå‰ç«¯å¼€å‘ï¼Œå¦‚ä½•åœ¨å‰ç«¯å¼€å‘ä¸­å‘æŒ¥ä½œç”¨ã€‚

é‚£ä¹ˆæœ¬æ–‡ï¼Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œç»™å¤§å®¶ä¼™è¯¦ç»†è¯´è¯´ã€‚

åˆæ¬¡çœ‹åˆ° MoonBit ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¯2024å¹´çš„4æœˆä»½ï¼Œå®ƒçš„ä¸»æ‰“åŠŸèƒ½ `é«˜è´¨é‡çš„æå°wasm` ä»¤æˆ‘å°è±¡æ·±åˆ»ï¼Œä¸¤çœ¼æ”¾å…‰ã€‚æ ¹æ®æˆ‘çš„çŒœæµ‹ï¼Œä¸æ¸…æ¥š MoonBit åœ¨å‰ç«¯çš„åº”ç”¨åœºæ™¯ï¼Œåº”è¯¥å¾ˆå¤§çš„å¯èƒ½æ˜¯å¯¹è¿™ä¸ª `wasm` äº†è§£ä¸å¤Ÿæ‰€å¯¼è‡´çš„ã€‚è€Œ MoonBit åœ¨å‰ç«¯å¼€å‘ä¸­çš„åº”ç”¨é•¿ï¼Œå…¶å®ä¸»è¦å°±æ˜¯ wasm çš„åº”ç”¨åœºæ™¯ã€‚

JavaScript ä»1995å¹´è¯ç”Ÿåˆ°ç°åœ¨ï¼Œå·²ç»30å¹´äº†ï¼Œä¸€ç›´æ˜¯æµè§ˆå™¨ä¸­å¯ç¼–ç¨‹è¯­è¨€çš„ `ç‹¬è‹—`ï¼Œæˆ–è®¸å†å²ä¸Šæ›¾å‡ºç°è¿‡å…¶ä»–æŠ€æœ¯çš„å°è¯•ï¼Œä½†åŸºæœ¬æ¯”èšèœ‰çš„å¯¿å‘½è¿˜çŸ­ã€‚

æ›¾ç»çš„ Dart è±ªè¨€è¦åš JavaScript çš„ç»§æ‰¿äººï¼Œä½†æµè§ˆå™¨å‚å•† (`å¾®è½¯ã€Mozilla`) ä¸è®¤ï¼Œå¯¼è‡´å…¶åªèƒ½è°ƒè½¬èˆ¹å¤´ï¼Œä¸ Flutter é…åˆï¼Œåšè·¨å¹³å°åº”ç”¨ï¼Œè¦æƒ³åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Ÿä¸å¥½æ„æ€ï¼Œè¯·ç¼–è¯‘æˆ js å†è¯´ã€‚

![](https://static.yicode.tech/images/202507/20250715100732.png)

è€Œè¿™ä¸ªç”± `Brendan Eich` èŠ±äº†10å¤©è®¾è®¡çš„è¯­è¨€ï¼Œä¹Ÿä¸€ç›´è¢«äººè¯Ÿç—…ï¼Œå…¶è¯­æ³•æ¾æ•£å¦‚è–›å®šè°”çš„é‡å­çŒ«ä¸€æ ·å…·æœ‰æ³¢ç²’äºŒè±¡æ€§ï¼Œéš¾ä»¥ç¢ç£¨ã€‚ç”±äº JavaScript çš„æ€§èƒ½æœ¬å°±ä¸€èˆ¬ (`æ¯”Pythonå¥½`)ï¼Œæ‰€ä»¥å¾ˆå¤šå¤§å‹åº”ç”¨ (`å¦‚åœ¨çº¿PSï¼Œç½‘é¡µè®¾è®¡å·¥å…·Figma`) å°±å¾ˆéš¾ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æµç•…ä½¿ç”¨ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ2017å¹´ WebAssembly çš„æ¦‚å¿µè¢«æå‡ºï¼Œ2019å¹´ä¸ºå…¶åˆ¶å®šäº† Web æ ‡å‡†ï¼Œæˆä¸ºäº†ç¬¬äºŒä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¿è¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸»æ‰“åŠŸèƒ½å°±ä¸€ä¸ªå­—ï¼š`å¿«`ã€‚

æ€ä¹ˆä¸ªå¿«æ³•å‘¢ï¼Ÿè¯·çœ‹ä»¥ä¸‹æ•°æ®ï¼š

- **æ–æ³¢é‚£å¥‘æ•°åˆ—**ï¼šå‚æ•°å¢å¤§æ—¶ Wasm ä¼˜åŠ¿æ›´æ˜æ˜¾ï¼Œå¹³å‡é€Ÿåº¦å¿« 62.97%
- **å›¾åƒå¤„ç†**ï¼šå›¾ç‰‡æ»¤é•œå’Œè§†é¢‘å·ç§¯æ•ˆç‡æå‡ 41.7%-49%
- **éŸ³é¢‘è§£ç **ï¼šå¤„ç†é«˜éŸ³è´¨éŸ³é¢‘æ—¶ï¼ŒWasm è€—æ—¶ä»10ç§’é™è‡³2ç§’
- **Wasm**ï¼šæµå¼ç¼–è¯‘ (compileStreaming) æ¯” JS è§£æå¿« 10-20 å€
- **ç¼“å­˜æœºåˆ¶**ï¼šIndexedDB å­˜å‚¨ç¼–è¯‘åæ¨¡å—ï¼Œçƒ­å¯åŠ¨åŠ é€Ÿ 400 å€

æ‰€ä»¥ï¼Œå¦‚æœä½ çš„æŸä¸ªä¸šåŠ¡ï¼ŒæŸä¸ªåŠŸèƒ½ï¼Œéœ€è¦ `æ›´å¿«` çš„è¯ï¼Œwasm æ˜¯ä¸äºŒä¹‹é€‰ã€‚

```wast
(module
  (func $add (param $x i32) (param $y i32) (result i32)
    (i32.add
      (local.get $x)
      (local.get $y)
    )
  )
  (export "add" (func $add))
)
```

åŒæ—¶å‘¢ï¼Œwasm å¤©ç„¶è‡ªå¸¦åŠ å¯†ï¼Œå¦‚ä¸Šï¼Œæ˜¯å®ç°ä¸€ä¸ªæœ€ç®€å•çš„åŠ æ³•å‡½æ•°ã€‚åŠŸèƒ½ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä»£ç é‡å¤šä¸€ç‚¹ï¼Œè‚‰çœ¼å’ŒäººåŠ›å¾ˆéš¾é˜…è¯»å’Œç ´è§£ (`å¹¶ä¸æ˜¯å®Œå…¨ä¸èƒ½ç ´è§£`)ï¼Œæ‰€ä»¥ï¼Œé’ˆå¯¹ä¸€äº›æœºå¯†æ€§çš„ï¼Œæ•æ„Ÿæ€§çš„åŠŸèƒ½ï¼Œé€šè¿‡ç¼–è¯‘æˆ wasm å¯¹å¤–æä¾›ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³ä¿å¯†æ€§é—®é¢˜ï¼Œæ¯” js è£¸å¥”æˆ–ä»£ç æ··æ·†å¼ºå¤šäº†ã€‚

ä»£ç æ··æ·†ä¸€ä¸ªä¼šå¢åŠ ä»£ç ä½“ç§¯ï¼ŒäºŒä¸ªä¼šè®©æ€§èƒ½ä¸¥é‡ä¸‹é™ï¼Œä¸‰ä¸ªè¿˜è¿œæ¯” wasm å®¹æ˜“ç ´è§£ï¼Œå±äºéå¸¸é¸¡è‚‹çš„ä¸€ä¸ªæ–¹æ¡ˆã€‚

å¥½äº†ï¼Œè¯´å®Œäº†èƒŒæ™¯ï¼Œç›¸ä¿¡è¯»è€…æœ‹å‹ä»¬å¯¹ wasm åº”è¯¥æœ‰ä¸€å®šç¨‹åº¦çš„è®¤è¯†å’Œäº†è§£ï¼Œæ¥ä¸‹æ¥ï¼Œæ€ä¹ˆè·Ÿ MoonBit æ‰¯ä¸Šå…³ç³»å‘¢ï¼Ÿ

![](https://static.yicode.tech/images/202507/20250715105741.png)

å¾ˆç®€å•ï¼Œè¯·çœ‹ä¸Šå›¾ã€‚

ç›®å‰ä¸šç•Œå†…ï¼Œç”Ÿæˆé«˜è´¨é‡çš„ wasm çš„ç¼–ç¨‹è¯­è¨€ï¼Œé Rust è«å±ï¼Œä½†æ˜¯å‘¢ï¼ŒMoonBit è¿™ä¸ªä¸“é—¨ä¸»æ‰“é«˜è´¨é‡ wasm çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¯” Rust æ›´å¼ºï¼Œè¯­æ³•ä¹Ÿæ²¡æœ‰ Rust é‚£ä¹ˆå¤æ‚ï¼Œéå¸¸é€‚åˆå‰ç«¯ï¼Œæˆ–è€…è¯´æ˜¯æ‰€æœ‰ç¨‹åºå‘˜å…¥æ‰‹ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘å®é™…æ¼”ç¤ºä¸€ä¸‹ï¼Œå¦‚ä½•ç”¨ MoonBit å†™ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œå¹¶ç¼–è¯‘æˆ wasmï¼Œç„¶ååœ¨å‰ç«¯ä¸­ä½¿ç”¨ã€‚

åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶ï¼š

```bash
t55/
â”œâ”€â”€ main.mbt # ä¸»å…¥å£ ç›¸å½“äº index.js
â”œâ”€â”€ moon.mod.json # æ¨¡å—ä¿¡æ¯ ç›¸å½“äº package.json
â””â”€â”€ moon.pkg.json # åŒ…ä¿¡æ¯ ç›¸å½“äº libï¼ˆåº“ï¼‰çš„æè¿°æ–‡ä»¶
```

æ–‡ä»¶å†…å®¹åˆ†åˆ«å¦‚ä¸‹ï¼š

**main.mbt**

```mbt
pub fn plus(x : Int, y : Int) -> Int {
  x + y
}

fn main {
  println("åŠ æ³•å‡½æ•°")
}
```

**moon.mod.json**

```json
{
    "name": "chensuiyi/plus",
    "version": "0.1.0",
    "readme": "README.md",
    "repository": "",
    "license": "Apache-2.0",
    "keywords": [],
    "description": "",
    "source": "",
    "warn-list": "-A"
}
```

**moon.pkg.json**

```json
{
    "is_main": true,
    "link": {
        "wasm": {
            "exports": ["plus"] // å¯¼å‡º plus å‡½æ•°ç»™å‰ç«¯ä½¿ç”¨
        }
    }
}
```

ä¸‹ä¸€æ­¥ï¼Œç›´æ¥è¿è¡Œ `moon build --target wasm` å‘½ä»¤ï¼Œå°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œç”Ÿæˆ `target/wasm/release/build/plus.wasm`ã€‚

ä¸‹ä¸€æ­¥å‘¢ï¼Œåˆ›å»ºä¸€ä¸ª html æ–‡ä»¶ï¼ŒæŠŠ wasm å¼•å…¥ï¼š

---

åœ¨çº¿è®¿é—®åœ°å€ï¼š`https://static.yicode.tech/moonbit-wasm-plus.html`ï¼Œæµè§ˆå™¨æ§åˆ¶å°çœ‹è¾“å‡ºç»“æœã€‚

**moonbit-wasm-plus.html**

```HTML
<!DOCTYPE html>
<html>
    <head>
        <title>æµ‹è¯•MoonBitçš„plus.wasm</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <script>
            WebAssembly.instantiateStreaming(fetch("./download/plus.wasm"), {
                spectest: {
                    print_char: (char) => {
                        console.log(char);
                    },
                },
            }).then((result) => {
                const sum = result.instance.exports.plus(123, 456);
                console.log("ğŸ”¥[ åŠ æ³•æ±‚å’Œ 123 + 456 ] = ", sum);
            });
        </script>
    </body>
</html>

```

![](https://static.yicode.tech/images/202507/20250715115537.png)

è¿™ä¹ˆä¸€æ¥å‘¢ï¼Œæˆ‘ä»¬å°±å®ç°äº† MoonBit åœ¨å‰ç«¯ä¸­çš„åº”ç”¨ï¼Œè‡³äº MoonBit å¦‚ä½•ä¸ºå‰ç«¯å¼€å‘å¸¦æ¥å¸®åŠ©ï¼Œé‚£å°±ä¸»è¦çœ‹ wasm èƒ½ç»™å‰ç«¯å¼€å‘å¸¦æ¥ä»€ä¹ˆå¥½å¤„äº†ã€‚

æ³¨æ„äº†ï¼Œè¿™åªæ˜¯ MoonBit çš„ä¸€éƒ¨åˆ†ä¼˜åŠ¿ï¼Œåœ¨ç”Ÿæˆ wasm è¿™ä¸ªäº‹æƒ…æ–¹é¢ï¼Œåšåˆ°äº†æè‡´ã€‚è¿˜æœ‰æ›´å¤šå…¶ä»–åœºæ™¯ï¼Œå…¶ä»–å¹³å°ï¼Œå…¶ä»–é—®é¢˜ä¸Šé¢çš„ä¼˜åŠ¿ï¼Œæœ¬æ–‡å°±ä¸å†ç»†è¯´äº†ï¼Œåç»­æ–‡ç« ä¼šè¿›ä¸€æ­¥åˆ†äº«ã€‚

MoonBit äº¤æµç¾¤åŠ å¾®ï¼š`chensuiyime`ï¼ŒåŠ ä¸ä¸Šåˆ°å…¬ä¼—å·ï¼š`é™ˆéšæ˜“` ç•™è¨€ã€‚

æœ€åï¼ŒMoonBit åœ¨7æœˆ19æ—¥åœ¨æ­å·çš„é»„é¾™å›½é™…ä¸­å¿ƒæœ‰ä¸€ä¸ªæŠ€æœ¯æ²™é¾™ï¼Œå¦‚æœå¤§å®¶å¯¹ MoonBit æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ‰«æä¸‹æ–¹äºŒç»´ç æŠ¥åå‚ä¼šä¸ã€‚

![](https://static.yicode.tech/images/202507/20250715115244.png)
