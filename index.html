<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <title>MoonBit - 新一代AI云原生开发平台</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="description" content="MoonBit - 张宏波老师最新力作，新一代AI云原生开发平台，快速、简单、可拓展" />
        <meta name="keywords" content="MoonBit,编程语言,AI,云原生,开发平台,张宏波,ReScript" />
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
        <link rel="stylesheet" href="/index.css" />
        <link rel="preload" href="/images/logo.png" as="image" />
        <link rel="preload" href="/images/1.svg" as="image" />
        <link rel="preload" href="/images/2.svg" as="image" />
        <link rel="preload" href="/images/3.svg" as="image" />
        <link rel="preload" href="/images/4.svg" as="image" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet" />
    </head>
    <body>
        <main class="home-more">
            <section class="banner" role="banner" data-parallax="true">
                <div class="scan-lines" aria-hidden="true"></div>
                <div class="geometric-bg" aria-hidden="true">
                    <div class="tech-elements"></div>
                    <div class="hexagon"></div>
                </div>
                <div class="info">
                    <div class="left">
                        <div class="logo-wrap">
                            <img class="logo" src="/images/logo.png" alt="MoonBit Logo" loading="lazy" />
                        </div>
                        <h1 class="logo-name">MoonBit(月兔)</h1>
                        <div class="author">张宏波老师最新力作（原reScript作者）</div>
                        <div class="describe">
                            <h2 class="title">新一代AI云原生编程语言</h2>
                            <p class="tips">快速 · 简单 · 可拓展</p>
                        </div>
                    </div>
                    <div class="space" aria-hidden="true"></div>
                    <div class="right">
                        <div class="compare" role="region" aria-label="性能对比图表">
                            <div class="row" data-tooltip="运行时性能对比 - MoonBit表现优异">
                                <div class="img">
                                    <img class="icon" src="/images/1.svg" alt="运行时性能" loading="lazy" />
                                </div>
                                <div class="data">
                                    <div class="line">
                                        <div class="name">MoonBit</div>
                                        <div class="progress" role="progressbar" aria-valuenow="177.9" aria-valuemin="0" aria-valuemax="6357.8" aria-label="MoonBit运行时间">
                                            <div class="bar">
                                                <div class="bar-inner main" style="width: 3%"></div>
                                            </div>
                                            <div class="value">177.9ms</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Rust</div>
                                        <div class="progress" role="progressbar" aria-valuenow="160.8" aria-valuemin="0" aria-valuemax="6357.8" aria-label="Rust运行时间">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 2%"></div>
                                            </div>
                                            <div class="value">160.8ms</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Go</div>
                                        <div class="progress" role="progressbar" aria-valuenow="6357.8" aria-valuemin="0" aria-valuemax="6357.8" aria-label="Go运行时间">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 200px"></div>
                                            </div>
                                            <div class="value">6357.8ms</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" data-tooltip="文件大小对比 - MoonBit生成最小文件">
                                <div class="img">
                                    <img class="icon" src="/images/2.svg" alt="文件大小" loading="lazy" />
                                </div>
                                <div class="data">
                                    <div class="line">
                                        <div class="name">MoonBit</div>
                                        <div class="progress" role="progressbar" aria-valuenow="253" aria-valuemin="0" aria-valuemax="1447712" aria-label="MoonBit文件大小">
                                            <div class="bar">
                                                <div class="bar-inner main" style="width: 2%"></div>
                                            </div>
                                            <div class="value">253 bytes</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Rust</div>
                                        <div class="progress" role="progressbar" aria-valuenow="498" aria-valuemin="0" aria-valuemax="1447712" aria-label="Rust文件大小">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 3%"></div>
                                            </div>
                                            <div class="value">498 bytes</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Go</div>
                                        <div class="progress" role="progressbar" aria-valuenow="1447712" aria-valuemin="0" aria-valuemax="1447712" aria-label="Go文件大小">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 200px"></div>
                                            </div>
                                            <div class="value">1,447,712 bytes</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" data-tooltip="编译时间对比 - MoonBit编译速度最快">
                                <div class="img">
                                    <img class="icon" src="/images/3.svg" alt="总耗时" loading="lazy" />
                                </div>
                                <div class="data">
                                    <div class="line">
                                        <div class="name">MoonBit</div>
                                        <div class="progress" role="progressbar" aria-valuenow="1060" aria-valuemin="0" aria-valuemax="2560" aria-label="MoonBit总耗时">
                                            <div class="bar">
                                                <div class="bar-inner main" style="width: 10%"></div>
                                            </div>
                                            <div class="value">1.06 s</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Rust</div>
                                        <div class="progress" role="progressbar" aria-valuenow="9010" aria-valuemin="0" aria-valuemax="2560" aria-label="Rust总耗时">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 200px"></div>
                                            </div>
                                            <div class="value">9.01 s</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">Go</div>
                                        <div class="progress" role="progressbar" aria-valuenow="2560" aria-valuemin="0" aria-valuemax="2560" aria-label="Go总耗时">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 30%"></div>
                                            </div>
                                            <div class="value">2.56 s</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" data-tooltip="内存占用对比 - MoonBit内存效率最高">
                                <div class="img">
                                    <img class="icon" src="/images/4.svg" alt="内存占用" loading="lazy" />
                                </div>
                                <div class="data">
                                    <div class="line">
                                        <div class="name">MoonBit</div>
                                        <div class="progress" role="progressbar" aria-valuenow="338.6" aria-valuemin="0" aria-valuemax="8493.8" aria-label="MoonBit内存占用">
                                            <div class="bar">
                                                <div class="bar-inner main" style="width: 4%"></div>
                                            </div>
                                            <div class="value">338.6 ns</div>
                                        </div>
                                    </div>
                                    <div class="line">
                                        <div class="name">JS Iterator helpers</div>
                                        <div class="progress" role="progressbar" aria-valuenow="8493.8" aria-valuemin="0" aria-valuemax="8493.8" aria-label="JS Iterator helpers内存占用">
                                            <div class="bar">
                                                <div class="bar-inner" style="width: 200px"></div>
                                            </div>
                                            <div class="value">8,493.8 ns</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="action">
                    <a href="#" class="button plugin" role="button" aria-label="下载MoonBit插件" tabindex="0" data-magnetic="true"> 下载插件 </a>
                </div>
            </section>
        </main>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const images = document.querySelectorAll('img');
                images.forEach((img) => {
                    img.addEventListener('error', function () {
                        this.style.display = 'none';
                    });

                    img.addEventListener('load', function () {
                        this.style.opacity = '1';
                    });
                });

                // 进度条动画延迟启动
                setTimeout(() => {
                    document.querySelectorAll('.bar-inner').forEach((bar, index) => {
                        bar.style.animationDelay = `${index * 0.1}s`;
                    });
                }, 500);

                // 性能监控
                if ('performance' in window) {
                    window.addEventListener('load', () => {
                        const navigation = performance.getEntriesByType('navigation')[0];
                        console.log('页面加载时间:', navigation.loadEventEnd - navigation.fetchStart, 'ms');
                    });
                }

                // 视差效果
                const banner = document.querySelector('.banner[data-parallax="true"]');
                if (banner && window.innerWidth > 768) {
                    document.addEventListener('mousemove', (e) => {
                        const { clientX, clientY } = e;
                        const { innerWidth, innerHeight } = window;

                        const xPercent = (clientX / innerWidth - 0.5) * 2;
                        const yPercent = (clientY / innerHeight - 0.5) * 2;

                        const geoBeforeElement = banner.querySelector('.geometric-bg');
                        if (geoBeforeElement) {
                            const style = geoBeforeElement.style;
                            style.setProperty('--mouse-x', `${xPercent * 10}px`);
                            style.setProperty('--mouse-y', `${yPercent * 10}px`);
                        }

                        const info = banner.querySelector('.info');
                        if (info) {
                            info.style.transform = `translate(${xPercent * 2}px, ${yPercent * 2}px)`;
                        }
                    });
                }

                // 磁性按钮效果
                const magneticButton = document.querySelector('[data-magnetic="true"]');
                if (magneticButton && window.innerWidth > 768) {
                    magneticButton.addEventListener('mouseenter', function () {
                        this.addEventListener('mousemove', magneticEffect);
                    });

                    magneticButton.addEventListener('mouseleave', function () {
                        this.removeEventListener('mousemove', magneticEffect);
                        this.style.transform = '';
                    });

                    function magneticEffect(e) {
                        const rect = this.getBoundingClientRect();
                        const x = e.clientX - rect.left - rect.width / 2;
                        const y = e.clientY - rect.top - rect.height / 2;

                        this.style.transform = `translate(${x * 0.1}px, ${y * 0.1}px)`;
                    }
                }

                // 进度条点击交互
                document.querySelectorAll('.bar').forEach((bar) => {
                    bar.addEventListener('click', function (e) {
                        const rect = this.getBoundingClientRect();
                        const clickPosition = (e.clientX - rect.left) / rect.width;
                        const value = this.parentElement.parentElement.querySelector('.value').textContent;

                        // 显示详细信息
                        showProgressDetail(this, clickPosition, value);
                    });
                });

                // 按钮状态管理
                const downloadButton = document.querySelector('.button.plugin');
                if (downloadButton) {
                    downloadButton.addEventListener('click', function (e) {
                        e.preventDefault();

                        // 添加加载状态
                        this.classList.add('loading');
                        this.textContent = '正在准备下载...';

                        // 模拟下载过程
                        setTimeout(() => {
                            this.classList.remove('loading');
                            this.classList.add('success');
                            this.textContent = '下载成功！';

                            // 恢复原始状态
                            setTimeout(() => {
                                this.classList.remove('success');
                                this.textContent = '下载插件';
                            }, 2000);
                        }, 1500);

                        // 添加点击波纹效果
                        const ripple = document.createElement('span');
                        const rect = this.getBoundingClientRect();
                        const size = Math.max(rect.width, rect.height);
                        const x = e.clientX - rect.left - size / 2;
                        const y = e.clientY - rect.top - size / 2;

                        ripple.style.cssText = `
                            position: absolute;
                            width: ${size}px;
                            height: ${size}px;
                            left: ${x}px;
                            top: ${y}px;
                            background: rgba(255,255,255,0.3);
                            border-radius: 50%;
                            transform: scale(0);
                            animation: ripple 0.6s ease-out;
                            pointer-events: none;
                        `;

                        this.appendChild(ripple);
                        setTimeout(() => ripple.remove(), 600);
                    });
                }

                // 数值动画计数器
                function animateCounter(element, start, end, duration) {
                    const startTime = Date.now();
                    const range = end - start;

                    function update() {
                        const elapsed = Date.now() - startTime;
                        const progress = Math.min(elapsed / duration, 1);
                        const current = start + range * easeOutQuart(progress);

                        element.textContent = formatValue(current, element.dataset.unit || '');

                        if (progress < 1) {
                            requestAnimationFrame(update);
                        }
                    }

                    update();
                }

                function easeOutQuart(t) {
                    return 1 - Math.pow(1 - t, 4);
                }

                function formatValue(value, unit) {
                    if (unit === 'ms') {
                        return `${value.toFixed(1)}ms`;
                    } else if (unit === 'bytes') {
                        return value > 1000 ? `${(value / 1000).toFixed(0)},${(value % 1000).toFixed(0)} bytes` : `${value.toFixed(0)} bytes`;
                    } else if (unit === 's') {
                        return `${value.toFixed(2)} s`;
                    } else if (unit === 'ns') {
                        return `${value.toFixed(1)} ns`;
                    }
                    return value.toFixed(1);
                }

                function showProgressDetail(barElement, position, value) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'progress-tooltip';
                    tooltip.textContent = `点击位置: ${(position * 100).toFixed(1)}% | 实际值: ${value}`;
                    tooltip.style.cssText = `
                        position: absolute;
                        top: -30px;
                        left: ${position * 100}%;
                        transform: translateX(-50%);
                        background: var(--text-primary);
                        color: var(--background-primary);
                        padding: 4px 8px;
                        border-radius: 4px;
                        font-size: 12px;
                        white-space: nowrap;
                        z-index: 1000;
                        pointer-events: none;
                    `;

                    barElement.style.position = 'relative';
                    barElement.appendChild(tooltip);

                    setTimeout(() => tooltip.remove(), 2000);
                }

                // 键盘导航增强
                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Tab') {
                        document.body.classList.add('keyboard-navigation');
                    }
                });

                document.addEventListener('mousedown', function () {
                    document.body.classList.remove('keyboard-navigation');
                });
            });

            // 图片加载错误处理
            document.addEventListener('DOMContentLoaded', function () {
                const images = document.querySelectorAll('img');
                images.forEach((img) => {
                    img.addEventListener('error', function () {
                        this.style.display = 'none';
                    });

                    img.addEventListener('load', function () {
                        this.style.opacity = '1';
                    });
                });

                // 进度条动画延迟启动
                setTimeout(() => {
                    document.querySelectorAll('.bar-inner').forEach((bar, index) => {
                        bar.style.animationDelay = `${index * 0.1}s`;
                    });
                }, 500);

                // 性能监控
                if ('performance' in window) {
                    window.addEventListener('load', () => {
                        const navigation = performance.getEntriesByType('navigation')[0];
                        console.log('页面加载时间:', navigation.loadEventEnd - navigation.fetchStart, 'ms');
                    });
                }
            });

            // 按钮点击效果
            document.querySelector('.button.plugin')?.addEventListener('click', function (e) {
                e.preventDefault();

                // 添加点击波纹效果
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;

                ripple.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    left: ${x}px;
                    top: ${y}px;
                    background: rgba(255,255,255,0.3);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: ripple 0.6s ease-out;
                    pointer-events: none;
                `;

                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });

            // 简化科技效果 - 只保留基本的
            if (window.innerWidth > 768) {
                // 只保留简单的粒子效果
                createSimpleParticles();
            }

            // 简化的粒子系统
            function createSimpleParticles() {
                const particleCount = 20; // 减少粒子数量

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.style.cssText = `
                        position: absolute;
                        width: 1px;
                        height: 1px;
                        background: var(--tech-cyan);
                        border-radius: 50%;
                        opacity: 0;
                        z-index: 1;
                        pointer-events: none;
                    `;

                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.animation = `particleFloat ${4 + Math.random() * 2}s ease-in-out infinite ${Math.random() * 3}s`;

                    document.querySelector('.banner').appendChild(particle);
                }
            }
        </script>

        <style>
            @keyframes ripple {
                to {
                    transform: scale(2);
                    opacity: 0;
                }
            }

            /* 键盘导航状态 */
            .keyboard-navigation *:focus {
                outline: 3px solid var(--main-color) !important;
                outline-offset: 2px !important;
            }

            /* 进度条工具提示 */
            .progress-tooltip {
                animation: tooltipFadeIn 0.3s ease-out;
            }

            @keyframes tooltipFadeIn {
                from {
                    opacity: 0;
                    transform: translateX(-50%) translateY(-5px);
                }
                to {
                    opacity: 1;
                    transform: translateX(-50%) translateY(0);
                }
            }

            /* 简化粒子动画 */
            @keyframes particleFloat {
                0%,
                100% {
                    opacity: 0;
                    transform: translateY(0) scale(0.5);
                }
                50% {
                    opacity: 0.6;
                    transform: translateY(-15px) scale(1);
                }
            }

            /* 字体优化 */
            .logo-name,
            .value {
                font-family: 'JetBrains Mono', 'Courier New', monospace;
            }
        </style>
    </body>
</html>
